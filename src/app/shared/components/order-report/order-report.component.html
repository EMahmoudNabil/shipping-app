<div class="container mt-5 arabic-style">
  <!-- Page Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0 text-warning bg-dark p-2 rounded">
      <i class="fas fa-file-alt me-2"></i> تقرير الطلبات
    </h2>
  </div>

  <!-- Filter Section -->
  <div class="card shadow-lg border-0 mb-4">
    <div class="card-body">
      <form (ngSubmit)="filterReports()">
        <div class="row">
          <!-- Order Status Filter -->
          <div class="col-md-4 mb-3">
            <label for="statusFilter" class="form-label">الحالات</label>
            <select
              class="form-select"
              id="statusFilter"
              [(ngModel)]="filters.status"
              name="status"
            >
              <option value="">اختر الحالة</option>
              <option *ngFor="let status of statuses" [value]="status">
                {{ status }}
              </option>
            </select>
          </div>

          <!-- Date Range Filters -->
          <div class="col-md-4 mb-3">
            <label for="startDate" class="form-label">من</label>
            <input
              type="date"
              class="form-control"
              id="startDate"
              [(ngModel)]="filters.startDate"
              name="startDate"
            />
          </div>
          <div class="col-md-4 mb-3">
            <label for="endDate" class="form-label">إلى</label>
            <input
              type="date"
              class="form-control"
              id="endDate"
              [(ngModel)]="filters.endDate"
              name="endDate"
            />
          </div>
        </div>

        <!-- Search Button -->
        <button type="submit" class="btn btn-primary">
          <i class="fas fa-search me-2"></i> بحث
        </button>
      </form>
    </div>
  </div>

  <!-- Order Reports Table -->
  <div class="card shadow-lg border-0">
    <div class="card-body p-0">
      <div class="table-responsive-lg">
        <table class="table table-hover mb-0">
          <thead class="bg-light-primary">
            <tr>
              <th>الرقم التسلسلي</th>
              <th>الحالة</th>
              <th>التاجر</th>
              <th>العميل</th>
              <th>رقم الهاتف</th>
              <th>المحافظة</th>
              <th>المدينة</th>
              <th>تكلفة الطلب</th>
              <th>المبلغ المستلم</th>
              <th>تكلفة الشحن</th>
              <th>قيمة الشحن المدفوعة</th>
              <th>قيمة الشركة</th>
              <th>التاريخ</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let report of orderReports; let i = index">
              <td>{{ (PageNumber - 1) * pageSize + i + 1 }}</td>
              <td>{{ report.status }}</td>
              <td>{{ report.merchantName }}</td>
              <td>{{ report.customerName }}</td>
              <td>{{ report.customerPhone1 }}</td>
              <td>{{ report.regionName }}</td>
              <td>{{ report.branchName }}</td>
              <td>{{ report.orderCost }}</td>
              <td>{{ report.amountReceived }}</td>
              <td>{{ report.shippingCost }}</td>
              <td>{{ report.shippingCostPaid }}</td>
              <td>{{ report.companyValue }}</td>
              <td>{{ report.reportDate | date: 'mediumDate' }}</td>
            </tr>
            <tr *ngIf="orderReports.length === 0">
              <td colspan="13" class="text-center py-3">
                لا توجد بيانات متاحة في الجدول
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Pagination Controls -->
  <div class="d-flex justify-content-between align-items-center mt-3">
    <div>
      <select
        class="form-select"
        [(ngModel)]="pageSize"
        (change)="onPageSizeChange(pageSize)"
      >
        <option [value]="5">5 عناصر</option>
        <option [value]="10">10 عناصر</option>
        <option [value]="20">20 عناصر</option>
      </select>
    </div>

    <nav aria-label="Page navigation">
      <ul class="pagination">
        <li class="page-item" [class.disabled]="PageNumber === 1">
          <a class="page-link" href="javascript:void(0)" (click)="prevPage()">
            <i class="fas fa-chevron-right"></i> السابق
          </a>
        </li>

        <li
          class="page-item"
          *ngFor="let page of pages"
          [class.active]="page === PageNumber"
        >
          <a
            class="page-link"
            href="javascript:void(0)"
            (click)="goToPage(page)"
          >
            {{ page }}
          </a>
        </li>

        <li class="page-item" [class.disabled]="PageNumber === totalPages">
          <a class="page-link" href="javascript:void(0)" (click)="nextPage()">
            التالي <i class="fas fa-chevron-left"></i>
          </a>
        </li>
      </ul>
    </nav>
  </div>
</div>